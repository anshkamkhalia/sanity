<section class="mx-auto max-w-4xl p-10">
  <!-- Header -->
  <div class="mb-10 text-center">
    <h2 class="text-4xl font-extrabold tracking-tight text-sky-700 sm:text-5xl">
      Mindfulness Check-In
    </h2>
    <p class="mt-3 text-lg text-slate-600">
      Tune in with yourself ðŸŒ± â€” Pick a number from 1 (tough day) to 10 (thriving âœ¨).
    </p>
    <p class="mt-3 text-lg text-slate-600">
      Note: Shows line after one day
    </p>
  </div>

  <!-- Success / status -->
  {% if success_msg %}
  <div class="mb-6 animate-fadeIn rounded-2xl border-2 border-sky-400 bg-sky-50 px-6 py-5 text-lg font-medium text-sky-800 shadow-lg text-center">
    {{ success_msg }}
  </div>
  {% endif %}

  <!-- Card -->
  <form method="POST" action="{{ url_for('check_in') }}"
    class="rounded-3xl border border-slate-200 bg-white p-10 shadow-xl">
    <fieldset>
      <legend class="mb-6 flex items-center justify-center gap-3 text-2xl font-bold text-slate-800">
        <span class="inline-flex h-12 w-12 items-center justify-center rounded-full bg-sky-100 text-2xl text-sky-600">ðŸ§˜</span>
        How are you feeling today?
      </legend>

      <!-- Scale helper -->
      <div class="mb-4 flex justify-between text-sm text-slate-500">
        <span>1 â€” rough day</span>
        <span>10 â€” thriving</span>
      </div>

      <!-- 1â€“10 options -->
      <div class="grid grid-cols-5 gap-6 sm:grid-cols-10">
        {% for n in range(1, 11) %}
        <label
          class="group relative inline-flex cursor-pointer items-center justify-center rounded-2xl border-2 border-slate-200 px-6 py-6 text-xl font-bold text-slate-700 transition 
                 hover:scale-110 hover:border-sky-400 hover:bg-sky-50 
                 peer-checked:scale-110 peer-checked:border-sky-500 peer-checked:bg-sky-100 peer-checked:text-sky-700">
          <input
            type="radio"
            name="mood_rank"
            value="{{ n }}"
            class="peer absolute inset-0 h-full w-full cursor-pointer appearance-none rounded-2xl"
            required
          />
          <span class="z-10">{{ n }}</span>
        </label>
        {% endfor %}
      </div>

      <!-- Live selection readout -->
      <div id="moodSelected" class="mt-6 text-lg text-center text-slate-600">
        Selected: <span class="font-bold text-sky-600" data-selected>â€”</span>
      </div>
    </fieldset>

    <!-- Submit -->
    <div class="mt-10 flex flex-col items-center gap-4 sm:flex-row sm:justify-between">
      <p class="text-sm text-slate-500">
        ðŸŒž One check-in a day helps you track your growth over time.
      </p>
      <button
        type="submit"
        class="inline-flex items-center gap-2 rounded-2xl bg-sky-500 px-8 py-4 text-lg font-semibold text-white shadow-lg transition 
               hover:scale-105 hover:bg-sky-600 focus:outline-none focus:ring-4 focus:ring-sky-300">
        Save My Mood
      </button>
    </div>
  </form>

  <!-- Mood graph -->
  <div class="mt-12">
    <h3 class="mb-4 text-center text-2xl font-bold text-slate-700">ðŸ“ˆ Your Mood Journey</h3>
    <div class="overflow-hidden rounded-3xl border border-slate-200 shadow-md">
    <img src="{{ graph_url }}" alt="Mood Graph">
    </div>
  </div>
</section>

<!-- Animations + helper script -->
<style>
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(-8px); }
  to { opacity: 1; transform: translateY(0); }
}
.animate-fadeIn {
  animation: fadeIn 0.5s ease-out;
}
</style>

<script>
  (function () {
    const selectedOut = document.querySelector('[data-selected]');
    document.addEventListener('change', (e) => {
      if (e.target && e.target.name === 'mood_rank') {
        selectedOut.textContent = e.target.value;
      }
    });
  })();
</script>
